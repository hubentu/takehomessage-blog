BiocManager::install("tidyverse")
a
dim(tickets)
tickets
library(leaflet.extras)
library(magrittr)

BiocManager::install("leaflet.extras")
library(leaflet.extras)
library(magrittr)

leaflet(quakes) %>% addProviderTiles(providers$CartoDB.DarkMatter) %>%
  setView( 178, -20, 5 ) %>%
  addHeatmap(lng = ~long, lat = ~lat, intensity = ~mag,
             blur = 20, max = 0.05, radius = 15)

quakes
head(quakes)
leaflet(quakes)
providers$CartoDB.DarkMatter
leaflet(quakes) %>% addProviderTiles(providers$CartoDB.DarkMatter) 
mean(quakes$long)
mean(quakes$lat)
leaflet(quakes) %>% addProviderTiles(providers$CartoDB.DarkMatter) %>%
  setView( 178, -20, 5 )
tickets
colnames(tickets)
tickets %>%
  count(violation_desc) %>%
  arrange(desc(n))

?setView
tickets
ll
tickets
ticket_f
tickets
ll %>% setView(-70, 40)
ll %>% setView(-70, 40, 15)
ll %>% setView(-78, 40, 15)
ll %>% setView(-75, 40, 15)
ll %>% setView(-75.2, 40, 12)
ll
ll
london.crimes.files <- Sys.glob(
  paste0(system.file('examples/data/London-Crimes', package='leaflet.extras'),
         '/*/*-city-of-london-street.csv.zip'))
london.crimes <- suppressMessages(
  purrr::map(
    london.crimes.files,
    ~readr::read_csv(.) %>%
      dplyr::select(Latitude, Longitude) %>%
      dplyr::filter(!is.na(Latitude))) %>%
  magrittr::set_names(basename(Sys.glob(
    paste0(system.file('examples/data/London-Crimes', package='leaflet.extras'),
           '/2016*')))))

london.crimes
leaf <- leaflet() %>%
  addProviderTiles(providers$CartoDB.Positron)

purrr::walk(
  names(london.crimes),
  function(month) {
    leaf <<- leaf %>%
      addHeatmap(
        data = london.crimes[[month]],
        layerId = month, group = month,
        lng=~Longitude, lat=~Latitude,
        blur = 20, max = 0.05, radius = 15)
  })

class(leaf)
leaf
leaf %>%
  setView(-0.094106, 51.515, 14) %>%
  addLayersControl(
    baseGroups = names(london.crimes),
    options = layersControlOptions(collapsed = FALSE)
  )

leaf %>%
  setView(-0.094106, 51.515, 14) %>%
  addLayersControl(
    baseGroups = names(london.crimes),
    options = layersControlOptions(collapsed = T)
  )
llm
llm$lat_m
render("")
knitr::knit("2019-12-5-Tidytuesday-Leaflet-heatmap.Rmd")
BiocManager::install("webshot")
knitr::knit("2019-12-5-Tidytuesday-Leaflet-heatmap.Rmd")
webshot::install_phantomjs()
knitr::knit("2019-12-5-Tidytuesday-Leaflet-heatmap.Rmd")
knitr::knit("2019-12-5-Tidytuesday-Leaflet-heatmap.Rmd")
?addHeatmap
knitr::knit("2019-12-5-Tidytuesday-Leaflet-heatmap.Rmd")
knitr::knit("2019-12-5-Tidytuesday-Leaflet-heatmap.Rmd")
q(0
q()
c
knitr::knit("2019-12-5-Tidytuesday-Leaflet-heatmap.Rmd")
tickets
q()
n
library(knitr)
opts_knit(base.url="/")
opts_knit$set(base.url = "/")
knit("2019-12-5-Tidytuesday-Leaflet-heatmap.Rmd")
knit("2019-12-5-Tidytuesday-Leaflet-heatmap.Rmd")
q()
n
knitr::knit()
library(knitr)
opts_knit$set(base.url = "/")
knit("2019-12-3-ggplot2-share-legend.Rmd")
library(V8)
ct$source("/tmp/test/bundle.js")
knit
knit("2019-12-10-R-package-V8.Rmd")
ct
knit("2019-12-10-R-package-V8.Rmd")
knit("2019-12-10-R-package-V8.Rmd")
knit("2019-12-10-R-package-V8.Rmd")
knit("2019-12-10-R-package-V8.Rmd")
q()
n
library(knitr)
knit("2019-12-10-R-package-V8.Rmd")
knit("2019-12-10-R-package-V8.Rmd")
ct$call("emoji.translate", "the house is on fire and the cat is eating the cake")
ct$call("emoji.translate", "Have some fun with JavaScript emoji library using the V8 R package.")
q()
n
